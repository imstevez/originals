(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports=a(279)},279:function(e,t,a){"use strict";a.r(t);var n=a(24),i=a(25),r=a(27),s=a(26),o=a(28),l=a(0),c=a.n(l),m=a(17),d=a.n(m),h=a(119),u=a(35),p=a(18),g=a(19),f=a.n(g),v=a(32),b=a.n(v),E=a(33),y=a.n(E),w=a(16),x=a.n(w),S=a(29),k=a.n(S),N=a(43),j=a.n(N),O=a(31),C=a.n(O),z="",T=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={disabled:!1,email:"",emailErr:!1,emailValid:!1,emailTips:z},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"handleEmail",value:function(e){var t=new RegExp("^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$");""===e.target.value||t.test(this.state.email)?""===e.target.value?this.setState({email:e.target.value,emailErr:!1,emailValid:!1}):this.setState({email:e.target.value,emailErr:!1,emailValid:!0}):this.setState({email:e.target.value,emailErr:!0,emailValid:!1})}},{key:"handleSubmit",value:function(){var e=this;this.state.emailValid?(fetch("http://www.koogo.net:8080/user/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email})}).then(function(e){return 200!==e.status?{code:500,message:"internal error"}:e.json()}).then(function(t){200===t.code?(alert("Success, complete email has been send to your mailbox"),e.props.history.push("/login")):(e.setState({disabled:!1,emailErr:!0}),alert(t.message))}).catch(function(t){e.setState({disabled:!1}),alert(t)}),this.setState({disabled:!0})):this.setState({emailErr:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes;return c.a.createElement("div",{className:t.container},c.a.createElement(b.a,null),c.a.createElement(f.a,{className:t.paper},c.a.createElement(x.a,{component:"h1",variant:"h6",color:"primary",className:t.typography},c.a.createElement(j.a,{className:t.cloud}),c.a.createElement("br",null),"\u6211\u8bb0 \u25cf \u4e91\u8d26\u672c"),c.a.createElement(k.a,{variant:"middle",className:t.divider}),c.a.createElement("form",{className:t.form},c.a.createElement(C.a,{className:t.textField,id:"login-email",variant:"filled",label:"\u90ae\u7bb1",autoComplete:"off",disabled:this.state.disabled}),c.a.createElement(y.a,{onClick:function(){return e.handleSubmit()},variant:"outlined",color:"primary",disabled:this.state.disabled,className:t.button},"\u6ce8\u518c"),c.a.createElement(x.a,{component:"h3",variant:"button",color:"textPrimary"},c.a.createElement("a",{href:"/login"},"\u5df2\u5b8c\u6210\u6ce8\u518c, \u767b\u9646")))))}}]),t}(c.a.Component),A=Object(p.withStyles)(function(e){return{container:{height:"100vh",padding:50,background:"linear-gradient(to right, #348AC7, #7474BF);"},paper:{maxWidth:400,margin:"auto",padding:"20px 0 40px 0"},typography:{textAlign:"center",fontSize:"18px",lineHeight:"18px"},cloud:{fontSize:70,lineHeight:70},divider:{margin:"15px 0 40px 0"},form:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},textField:{width:"70%"},button:{fontSize:"18px",height:45,width:"40%",marginTop:20,marginBottom:10}}})(T),B=a(105),F=a(5),V=a.n(F),L=a(106),P=a.n(L),I=a(108),H=a.n(I),_=a(109),Z=a.n(_),D=a(113),J=a.n(D),R=a(110),G=a.n(R),W=a(111),$=a.n(W),q=a(112),M=a.n(q),U=a(70),X=a.n(U),K=a(107),Q=a.n(K),Y={success:P.a,warning:Q.a,error:H.a,info:Z.a};var ee=Object(p.withStyles)(function(e){return{success:{backgroundColor:G.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:$.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,r=e.variant,s=Object(B.a)(e,["classes","className","message","onClose","variant"]),o=Y[r];return c.a.createElement(X.a,Object.assign({className:V()(t[r],a),"aria-describedby":"client-snackbar",message:c.a.createElement("span",{id:"client-snackbar",className:t.message},c.a.createElement(o,{className:V()(t.icon,t.iconVariant)}),n),action:[c.a.createElement(M.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},c.a.createElement(J.a,{className:t.icon}))]},s))}),te=a(115),ae=a.n(te),ne=a(114),ie=a.n(ne),re=window.localStorage,se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleInfoClose=function(e,t){if("clickaway"!==t){var n=a.state.info;n.open=!1,a.setState({info:n})}},a.state={info:{open:!1,variant:"success",message:""},infoOpen:!0,email:"",password:"",emailErr:!1,passwordErr:!1,disabled:!1},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"handleEmail",value:function(e){this.setState({email:e.target.value,emailErr:!1})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value,passwordErr:!1})}},{key:"handleLogin",value:function(){var e=this;this.state.email?this.state.password?(fetch("http://www.koogo.net:8080/user/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email,password:this.state.password})}).then(function(e){if(200===e.status){var t=e.headers.get("X-Login-token");return re.token=t,e.json()}return{code:e.status,message:"internal error"}}).then(function(t){if(200!==t.code)300!==t.code?303!==t.code?304!==t.code?e.setState({disabled:!1,info:{open:!0,variant:"error",message:"\u672a\u77e5\u9519\u8bef!"}}):e.setState({passwordErr:!0,disabled:!1,info:{open:!0,variant:"error",message:"\u5bc6\u7801\u9519\u8bef!"}}):e.setState({emailErr:!0,disabled:!1,info:{open:!0,variant:"error",message:"\u7528\u6237\u4e0d\u5b58\u5728!"}}):e.setState({emailErr:!0,passwordErr:!0,disabled:!1,info:{open:!0,variant:"error",message:"\u90ae\u7bb1\u6216\u5bc6\u7801\u683c\u5f0f\u4e0d\u6b63\u786e!"}});else{e.setState({info:{open:!0,variant:"success",message:"\u767b\u9646\u6210\u529f!"}});var a=e;setTimeout(function(){a.props.history.push("/profile")},1e3)}}).catch(function(t){alert(t),e.setState({disabled:!1})}),this.setState({disabled:!0})):this.setState({passwordErr:!0,info:{open:!0,variant:"error",message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a!"}}):this.setState({emailErr:!0,info:{open:!0,variant:"error",message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a!"}})}},{key:"render",value:function(){var e=this,t=this.props.classes;return c.a.createElement("div",{className:t.container},c.a.createElement(b.a,null),c.a.createElement(ie.a,{hidden:!this.state.disabled,className:t.progress}),c.a.createElement(ae.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.info.open,autoHideDuration:1e3,onClose:this.handleInfoClose},c.a.createElement(ee,{onClose:this.handleInfoClose,variant:this.state.info.variant,message:this.state.info.message})),c.a.createElement(f.a,{className:t.paper},c.a.createElement(x.a,{component:"h1",variant:"h6",color:"primary",className:t.typography},c.a.createElement(j.a,{className:t.cloud}),c.a.createElement("br",null),"\u6211\u8bb0 \u25cf \u4e91\u8d26\u672c"),c.a.createElement(k.a,{variant:"middle",className:t.divider}),c.a.createElement("form",{className:t.form},c.a.createElement(C.a,{className:t.textField,id:"login-email",variant:"filled",label:"\u90ae\u7bb1",autoComplete:"off",value:this.state.email,onChange:function(t){return e.handleEmail(t)},onBlur:function(t){return e.handleEmail(t)},error:this.state.emailErr,disabled:this.state.disabled}),c.a.createElement(C.a,{className:t.textField,id:"login-password",variant:"filled",label:"\u5bc6\u7801",autoComplete:"new-password",type:"password",value:this.state.password,onChange:function(t){return e.handlePassword(t)},onBlur:function(t){return e.handlePassword(t)},error:this.state.passwordErr,disabled:this.state.disabled}),c.a.createElement(y.a,{variant:"outlined",color:"primary",className:t.button,onClick:function(){return e.handleLogin()},disabled:this.state.disabled},"\u767b\u9646"),c.a.createElement(x.a,{component:"h3",variant:"button",color:"textPrimary"},c.a.createElement("a",{href:"/register"},"\u8fd8\u672a\u6ce8\u518c, \u6ce8\u518c")))))}}]),t}(c.a.Component),oe=Object(p.withStyles)(function(e){return{container:{height:"100vh",background:"linear-gradient(to right, #348AC7, #7474BF);",overflow:"hidden"},progress:{position:"fixed",width:"100%",background:"transparent"},paper:{maxWidth:400,margin:"50px auto",padding:"20px 0 40px 0"},typography:{textAlign:"center",fontSize:"18px",lineHeight:"18px"},cloud:{fontSize:70,lineHeight:70},divider:{margin:"15px 0 40px 0"},form:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},textField:{width:"70%"},button:{fontSize:"18px",height:45,width:"40%",marginTop:20,marginBottom:10}}})(se),le=a(116),ce=a.n(le),me=a(117),de=a.n(me),he=a(71),ue=a.n(he),pe=a(118),ge=a.n(pe),fe=window.localStorage,ve=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={avatar:"",id:"",email:"",nickname:""},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"redirectLogin",value:function(){fe.token="",this.props.history.push("/login")}},{key:"handleLogout",value:function(){var e=this;fetch("http://www.koogo.net:8080/user/auth/logout",{method:"POST",mode:"cors",headers:{"x-login-token":fe.token}}).then(function(e){return e.json()}).then(function(t){alert(t.message),localStorage.token="",e.props.history.push("/login")}).catch(function(t){localStorage.token="",alert(t),e.props.history.push("/login")})}},{key:"componentDidMount",value:function(){var e=this;""===fe.token?this.props.history.push("/login"):fetch("http://www.koogo.net:8080/user/info/",{headers:{"x-login-token":fe.token},mode:"cors"}).then(function(e){return e.json()}).then(function(t){200===t.code?e.setState({email:t.data.email,id:t.data.user_id,nickname:t.data.nickname,avatar:t.data.avatar}):(alert(t.message),e.redirectLogin())}).catch(function(t){alert(t),e.redirectLogin()})}},{key:"render",value:function(){var e=this,t=this.props.classes;return c.a.createElement("div",{className:t.root},c.a.createElement(b.a,null),c.a.createElement(ce.a,{position:"static",className:t.appBar},c.a.createElement(de.a,null,c.a.createElement(x.a,{variant:"h6",color:"inherit",className:t.grow},"Profile"),c.a.createElement(y.a,{color:"inherit",onClick:function(){e.handleLogout()}},"LOGOUT"))),c.a.createElement(f.a,{className:t.paper,elevation:1},c.a.createElement(ue.a,{container:!0,justify:"center"},c.a.createElement(ge.a,{src:this.state.avatar,className:t.bigAvatar})),c.a.createElement(k.a,{variant:"middle",className:t.divider}),c.a.createElement(ue.a,{container:!0,justify:"center",direction:"column"},c.a.createElement(x.a,{gutterBottom:!0,variant:"h6",component:"h3"},this.state.id),c.a.createElement(k.a,{variant:"middle",className:t.divider}),c.a.createElement(x.a,{gutterBottom:!0,variant:"h6",component:"h3"},this.state.nickname),c.a.createElement(k.a,{variant:"middle",className:t.divider}),c.a.createElement(x.a,{gutterBottom:!0,variant:"h6",component:"h3"},this.state.email))))}}]),t}(c.a.Component),be=Object(p.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},appBar:{height:60},menuButton:{marginLeft:-12,marginRight:20},paper:{width:600,margin:"auto",padding:30,marginTop:20},input:{width:400},button:{margin:20,height:50,width:200},rightIcon:{marginLeft:e.spacing.unit},divider:{margin:"0 0 20px 0"},bigAvatar:{margin:10,width:100,height:100,cursor:"pointer"},fileInput:{display:"none"},b:{display:"flex",width:300}}})(ve),Ee="",ye=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={disabled:!1,email:"",emailErr:!1,emailValid:!1,emailTips:Ee},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"handleEmail",value:function(e){var t=new RegExp("^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$");""===e.target.value||t.test(this.state.email)?""===e.target.value?this.setState({email:e.target.value,emailErr:!1,emailValid:!1}):this.setState({email:e.target.value,emailErr:!1,emailValid:!0}):this.setState({email:e.target.value,emailErr:!0,emailValid:!1})}},{key:"handleSubmit",value:function(){var e=this;this.state.emailValid?(fetch("http://www.koogo.net:8080/user/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email})}).then(function(e){return 200!==e.status?{code:500,message:"internal error"}:e.json()}).then(function(t){200===t.code?(alert("Success, complete email has been send to your mailbox"),e.props.history.push("/login")):(e.setState({disabled:!1,emailErr:!0}),alert(t.message))}).catch(function(t){e.setState({disabled:!1}),alert(t)}),this.setState({disabled:!0})):this.setState({emailErr:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes;return c.a.createElement("div",{className:t.container},c.a.createElement(b.a,null),c.a.createElement(f.a,{className:t.paper},c.a.createElement(x.a,{component:"h1",variant:"h6",color:"primary",className:t.typography},c.a.createElement(j.a,{className:t.cloud}),c.a.createElement("br",null),"\u6211\u8bb0 \u25cf \u4e91\u8d26\u672c"),c.a.createElement(k.a,{variant:"middle",className:t.divider}),c.a.createElement("form",{className:t.form},c.a.createElement(C.a,{className:t.textField,id:"login-email",variant:"filled",label:"",autoComplete:"off",value:"stevzhang01@gmail.com",disabled:!0}),c.a.createElement(C.a,{className:t.textField,id:"login-email",variant:"filled",label:"\u6635\u79f0",autoComplete:"off",disabled:this.state.disabled}),c.a.createElement(C.a,{className:t.textField,id:"login-passwd",variant:"filled",label:"\u5bc6\u7801",type:"password",disabled:this.state.disabled}),c.a.createElement(y.a,{onClick:function(){return e.handleSubmit()},variant:"outlined",color:"primary",disabled:this.state.disabled,className:t.button},"\u767b\u9646"),c.a.createElement(x.a,{component:"h3",variant:"button",color:"textPrimary"},c.a.createElement("a",{href:"/register"},"\u8fd8\u672a\u6ce8\u518c, \u6ce8\u518c")))))}}]),t}(c.a.Component),we=Object(p.withStyles)(function(e){return{container:{height:"100vh",padding:50,background:"linear-gradient(to right, #348AC7, #7474BF);"},paper:{maxWidth:400,margin:"auto",padding:"20px 0 40px 0"},typography:{textAlign:"center",fontSize:"18px",lineHeight:"18px"},cloud:{fontSize:70,lineHeight:70},divider:{margin:"15px 0 40px 0"},form:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},textField:{width:"70%"},button:{fontSize:"18px",height:45,width:"40%",marginTop:20,marginBottom:10}}})(ye),xe=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(h.a,null,c.a.createElement(u.a,{path:"/",exact:!0,component:be}),c.a.createElement(u.a,{path:"/Register",component:A}),c.a.createElement(u.a,{path:"/Complete/:token",component:we}),c.a.createElement(u.a,{path:"/login",component:oe}),c.a.createElement(u.a,{path:"/profile",component:be}))}}]),t}(c.a.Component);d.a.render(c.a.createElement(xe,null),document.querySelector("#root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.4016a840.chunk.js.map